{"version":3,"sources":["webpack:///./app/assets/javascripts/admin/models/project/project_model.coffee?695c","webpack:///./~/form-syphon/lib/index.js","webpack:///./app/assets/javascripts/admin/views/project/project_edit_view.coffee"],"names":[],"mappings":";;;;;AAAA;GAAA;;;AAAA,KAAW,oBAAQ,CAAR;;AACX,YAAW,oBAAQ,CAAR;;AAEL;;;;;;;0BAEJ,UAAU;;0BACV,cAAa;;0BAEb,aACE;KAAA,OACE;OAAA,WAAY,EAAZ;OACA,UAAW,EADX;MADF;KAGA,UAAU,GAHV;;;0BAKF,QAAQ,SAAC,QAAD;KAGN,QAAQ,CAAC,UAAT,QAAQ,CAAC,QAAU,IAAC,WAAO,CAAC;AAC5B,YAAO;GAJD;;;;IAXiB,QAAQ,CAAC;;AAiBpC,OAAM,CAAC,OAAP,GAAiB;;;;;;;;ACpBjB;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC;;;;;;;;ACxKD;GAAA;;;AAAA,KAAiB,oBAAQ,CAAR;;AACjB,OAAiB,oBAAQ,EAAR;;AACjB,cAAiB,oBAAQ,GAAR;;AACjB,cAAiB,oBAAQ,EAAR;;AACjB,SAAiB,oBAAQ,EAAR;;AAEX;;;;;;;6BAEJ,WAAW,CAAC,CAAC,QAAF,CAAW,sqDAAX;;6BA4CX,YAAY;;6BACZ,SACE;KAAA,eAAgB,YAAhB;;;6BAEF,KACE;KAAA,QAAS,MAAT;;;6BAGF,aAAa;KAEX,IAAC,SAAD,CAAU,IAAC,MAAX,EAAkB,MAAlB,EAA0B,IAAC,OAA3B;YACA,IAAC,MAAK,CAAC,KAAP;GAHW;;6BAMb,aAAa,SAAC,KAAD;AAEX;KAAA,KAAK,CAAC,cAAN;KAEA,IAAG,CAAI,IAAC,GAAE,CAAC,IAAK,GAAE,CAAC,aAAZ,EAAP;OACE,KAAK,CAAC,KAAN,CAAY,kCAAZ;AACA,cAFF;;KAIA,aAAa,UAAU,CAAC,SAAX,CAAqB,IAAC,GAAE,CAAC,IAAzB;KACb,UAAU,CAAC,KAAX,GAAmB,IAAC,MAAK,CAAC,GAAP,CAAW,OAAX,CAAmB,CAAC;YAEvC,IAAC,MAAK,CAAC,IAAP,CAAY,UAAZ,CAAuB,CAAC,IAAxB,CACE,aADF,EAEE,KAAK,CAAC,OAAN,CAAc,QAAd,CAFF,EAGE,GAAG,CAAC,MAAM,CAAC,OAAX,CAAmB,eAAY,CAAC,IAAC,MAAK,CAAC,GAAP,CAAW,MAAX,CAAD,CAA/B,CAHF;GAXW;;;;IA5De,UAAU,CAAC;;AA8EzC,OAAM,CAAC,OAAP,GAAiB","file":"11.11.js","sourcesContent":["_        = require(\"lodash\")\nbackbone = require(\"backbone\")\n\nclass ProjectModel extends Backbone.Model\n\n  urlRoot : \"/api/projects\"\n  idAttribute: \"name\"\n\n  default :\n    owner :\n      firstName : \"\"\n      lastName : \"\"\n    priority: 100\n\n  parse : (response)->\n\n    # set some sensible defaults\n    response.owner ||= @default.owner\n    return response\n\nmodule.exports = ProjectModel\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/assets/javascripts/admin/models/project/project_model.coffee\n **/","(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['lodash', 'jquery'], function(_, $) {\n      return factory(root, _, $);\n    });\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('lodash');\n    var $ = require('jquery');\n    module.exports = factory(root, _, $);\n  } else {\n    root.FormSyphon = factory(root, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n}(this, function(root, _, $) {\n\nvar FormSyphon, assignKeyValue, flattenData, getElementType, getter;\n\ngetter = function(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  } else {\n    return obj[\"default\"];\n  }\n};\n\nassignKeyValue = function(obj, keychain, value) {\n  var key;\n  if (!keychain) {\n    return obj;\n  }\n  key = keychain.shift();\n  if (!obj[key]) {\n    obj[key] = _.isArray(key) ? [] : {};\n  }\n  if (keychain.length === 0) {\n    if (_.isArray(obj[key])) {\n      obj[key].push(value);\n    } else {\n      obj[key] = value;\n    }\n  }\n  if (keychain.length > 0) {\n    assignKeyValue(obj[key], keychain, value);\n  }\n  return obj;\n};\n\nflattenData = function(data, parentKey, keyJoiner) {\n  var flatData;\n  flatData = {};\n  _.each(data, function(value, keyName) {\n    var hash;\n    hash = {};\n    if (parentKey) {\n      keyName = keyJoiner(parentKey, keyName);\n    }\n    if (_.isArray(value)) {\n      keyName += \"[]\";\n      hash[keyName] = value;\n    } else if (_.isPlainObject(value)) {\n      hash = flattenData(value, keyName, keyJoiner);\n    } else {\n      hash[keyName] = value;\n    }\n    return _.extend(flatData, hash);\n  });\n  return flatData;\n};\n\ngetElementType = function($el) {\n  var type;\n  type = $el.prop(\"tagName\").toLowerCase();\n  if (type === \"input\") {\n    type = $el.attr(\"type\") || \"text\";\n  }\n  return type;\n};\n\nFormSyphon = {\n  serialize: function($el) {\n    var result;\n    result = {};\n    _.forEach($el.find(\":input\"), (function(_this) {\n      return function(input) {\n        var $input, keychain, type, value;\n        $input = $(input);\n        type = getElementType($input);\n        keychain = _this.keySplitter(_this.keyExtractor($input));\n        if (!keychain) {\n          return;\n        }\n        value = getter(_this.readers, type)($input);\n        if (getter(_this.keyAssignmentValidators, type)($input, keychain, value)) {\n          return assignKeyValue(result, keychain, value);\n        }\n      };\n    })(this));\n    return result;\n  },\n  deserialize: function($el, data) {\n    var flatData;\n    flatData = flattenData(data, null, this.keyJoiner);\n    _.forEach($el.find(\":input\"), (function(_this) {\n      return function(input) {\n        var $input, key, type;\n        $input = $(input);\n        type = getElementType($input);\n        key = _this.keyExtractor($input);\n        if (!key) {\n          return;\n        }\n        return getter(_this.writers, type)($input, flatData[key]);\n      };\n    })(this));\n  },\n  keyAssignmentValidators: {\n    \"default\": function() {\n      return true;\n    },\n    radio: function($el, key, value) {\n      return $el.prop(\"checked\");\n    }\n  },\n  readers: {\n    \"default\": function($el) {\n      return $el.val();\n    },\n    number: function($el) {\n      return parseFloat($el.val());\n    },\n    checkbox: function($el) {\n      return $el.prop(\"checked\");\n    },\n    date: function($el) {\n      return new Date($el.val());\n    }\n  },\n  writers: {\n    \"default\": function($el, value) {\n      return $el.val(value);\n    },\n    date: function($el, value) {\n      return $el.val(value.toJSON().substring(0, 10));\n    },\n    checkbox: function($el, value) {\n      return $el.prop(\"checked\", value);\n    },\n    radio: function($el, value) {\n      return $el.prop(\"checked\", $(el).val() === value.toString());\n    }\n  },\n  keyExtractor: function($el) {\n    return $el.prop(\"name\");\n  },\n  keyJoiner: function(parentKey, key) {\n    return \"\" + parentKey + \"[\" + key + \"]\";\n  },\n  keySplitter: function(key) {\n    var lastKey, matches;\n    matches = key.match(/[^\\[\\]]+/g);\n    if (key.length > 1 && key.indexOf(\"[]\") === key.length - 2) {\n      lastKey = matches.pop();\n      matches.push([lastKey]);\n    }\n    return matches || null;\n  }\n};\n\nreturn FormSyphon;\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/form-syphon/lib/index.js\n ** module id = 332\n ** module chunks = 11 12 13 19\n **/","_              = require(\"lodash\")\napp            = require(\"app\")\nFormSyphon     = require(\"form-syphon\")\nMarionette     = require(\"backbone.marionette\")\nToast          = require(\"libs/toast\")\n\nclass ProjectEditView extends Marionette.LayoutView\n\n  template : _.template(\"\"\"\n    <div class=\"row\">\n      <div class=\"col-sm-12\">\n        <div class=\"well\">\n          <div class=\"col-sm-9 col-sm-offset-2\">\n            <h3>Update project</h3>\n          </div>\n\n          <form method=\"POST\" class=\"form-horizontal\">\n            <div class=\"form-group\">\n              <label class=\"col-sm-2\" for=\"team\">Team</label>\n              <div class=\"col-sm-10 team\">\n                <input type=\"text\" class=\"form-control\" name=\"team\" value=\"<%= team %>\" required autofocus disabled>\n              </div>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-sm-2 for=\"name\">Project Name</label>\n              <div class=\"col-sm-10\">\n                <input type=\"text\" class=\"form-control\" name=\"name\" value=\"<%= name %>\" required autofocus disabled>\n              </div>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-sm-2 for=\"owner\">Owner</label>\n              <div class=\"col-sm-10 owner\">\n                <input type=\"text\" class=\"form-control\" name=\"owner\" value=\"<%= owner.firstName %> <%= owner.lastName %>\" required autofocus disabled>\n              </div>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-sm-2 for=\"priority\">Priority</label>\n              <div class=\"col-sm-10\">\n                <input type=\"number\" class=\"form-control\" name=\"priority\" value=\"<%= priority %>\" required>\n              </div>\n            </div>\n            <div class=\"form-group\">\n              <div class=\"col-sm-2 col-sm-offset-9\">\n              <button type=\"submit\" class=\"form-control btn btn-primary\">Update</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  \"\"\")\n\n  className : \"container wide project-administration\"\n  events :\n    \"submit form\" : \"submitForm\"\n\n  ui :\n    \"form\" : \"form\"\n\n\n  initialize : ->\n\n    @listenTo(@model, \"sync\", @render)\n    @model.fetch()\n\n\n  submitForm : (event) ->\n\n    event.preventDefault()\n\n    if not @ui.form[0].checkValidity()\n      Toast.error(\"Please supply all needed values.\")\n      return\n\n    formValues = FormSyphon.serialize(@ui.form)\n    formValues.owner = @model.get(\"owner\").id\n\n    @model.save(formValues).then(\n      ->\n      Toast.success(\"Saved!\")\n      app.router.loadURL(\"/projects##{@model.get(\"name\")}\")\n    )\n\n\nmodule.exports = ProjectEditView\n\n\n\n/** WEBPACK FOOTER **\n ** ./app/assets/javascripts/admin/views/project/project_edit_view.coffee\n **/"],"sourceRoot":""}