@( user: models.user.User, explorativeAnnotations: List[models.annotation.Annotation], userTasks: List[(models.task.Task, models.annotation.Annotation)], trackedTimeOpt: Option[Map[models.user.PaymentInterval, scala.concurrent.duration.Duration]])(implicit session: oxalis.view.AuthedSessionData)

@import views._

@main(){
  <div class="container wide" id="userDetails">
    <h3>User: @user.name</h3>
    <h4>Tasks</h4>
    <table class="table table-striped mask-finished" id="dashboard-tasks">
      <thead>
        <tr>
          <th> # </th>
          <th> Type </th>
          <th> Project </th>
          <th> Modes </th>
          <th> DataSet </th>
          <th> Tracing Stats </th>
          <th> Last edited </th>
          <th> State </th>
          <th> </th>
        </tr>
      </thead>
      <tbody>
      @userTasks.map{ case (task, annotation) =>
        @taskAnnotationTableItem(task, annotation)
      }
      </tbody>
    </table>

    <a href="@controllers.admin.routes.NMLIO.userDownload(user.id)" title="download all finished tracings"><i class="icon-download"></i> download </a>
    <div class="divider-vertical"></div>
    <a href="#" id="toggle-finished">Show finished tasks</a>

    <hr />

    <a href="#" data-toggle="collapse" data-target="#explorativeTracings" id="toggle-explorative" class="collapsed">
    Explorative Tracings <i class="icon-caret-right"></i><i class="icon-caret-down"></i>
    </a>
   
    <div id="explorativeTracings" class="collapse out">
    
    <h4>Explorative Tracings</h4>
    <table class="table table-striped table-hover" id="explorative-tasks">
      <thead>
        <tr>
          <th> # </th>
          <th> Name </th>
          <th> DataSet </th>
          <th> Tracing Stats </th>
          <th> Tracing-Type </th>
          <th> Last edited </th>
          <th> </th>
        </tr>
      </thead>
      <tbody>
      @explorativeAnnotations.map{ annotation =>
        @html.user.dashboard.explorativeAnnotationTableItem(annotation)
      }
      </tbody>
    </table>
    </div>
    
    <hr />

    @trackedTimeOpt.map{ trackedTime =>
      <h3>Tracked Time</h3>
      <table class="table table-striped">
        <thead>
          <tr>
            <th> Month </th>
            <th> Worked </th>
            <th> Payed </th>
          </tr>
        </thead>
        <tbody>
        @trackedTime.map{ case (interval, time) => 
          <tr>
            <td> @interval </td>
            <td> @formatTimeHumanReadable(time) </td>
            <td> </td>
          </tr>
        }
        </tbody>
      </table>
    }
  </div>
}