@* simpleTracing Template File *@
@(annotation: models.annotation.AnnotationLike, user: Option[models.user.User],
	content : net.liftweb.common.Box[models.annotation.AnnotationContent])
@import braingames.reactivemongo.GlobalAccessContext

@import play.api.libs.concurrent.Execution.Implicits._

@stateLabel() = @{
  val lastReviewer = annotation.review.headOption.map(_._reviewer)
  annotation.state match{
    case s if s.isFinished =>
      <i class="fa fa-check-circle-o"></i><span> Finished</span>
    case s if lastReviewer != user.map(_._id) && s.isInReview =>
      <i class="fa fa-eye"></i><span> Already getting reviewed.</span>
    case _ =>
      <i class="fa fa-random"></i><span> In Progress</span>
  }
}

<tr>
  <td> @user.map(_.name).getOrElse("<deleted>") </td>
  <td> @content.map(a => formatDate(a.date)).getOrElse("") </td>
  <td> @stateLabel() </td>
  <td class="nowrap">
    @annotationLinks(annotation.actions(user))
    </td>
</tr>