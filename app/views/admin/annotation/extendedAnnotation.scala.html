@(task: models.task.Task,
  annotation: models.annotation.AnnotationLike,
  taskType: net.liftweb.common.Box[models.task.TaskType],
  project: net.liftweb.common.Box[models.task.Project],
  dataSetName: String,
  statsOpt: Option[models.tracing.skeleton.SkeletonTracingStatistic],
  content: net.liftweb.common.Box[models.annotation.AnnotationContent],
  user: models.user.User
  )

@import models.annotation.AnnotationDAO

@linkText(failed: Boolean) = {
  @if(failed) {
    Review failed -
  } else {
    Review -
  }
}

<tr class="@if(annotation.state.isFinished){finished}else{unfinished}">
  <td> @formatHash(task.id) </td>
  <td> @taskType.map(_.summary).getOrElse("<deleted>") - @annotation.typ</td>
  <td> @project.map(_.name).getOrElse("") </td>
  <td>

    @taskType.map( _.settings.allowedModes.map{ mode => {
        mode.capitalize
    }}).getOrElse(List(""))

  </td>
  <td> @dataSetName </td>

  @statsOpt.map{ stats =>
  <td>
    <span title="Trees"><i class="fa fa-sitemap"></i>@stats.numberOfTrees &nbsp;</span>
    <span title="Nodes">&bull; @stats.numberOfNodes &nbsp;</span>
    <span title="Edges"><i class="fa fa-arrows-h"></i>@stats.numberOfEdges</span>
  </td>
  }.getOrElse(<td />)

  <td>
    @content.map(e => formatDate(e.timestamp)).getOrElse("")
  </td>
  <td>
    @annotation.state match{
      case s if s.isFinished => {
        <i class="fa fa-check"></i><span> Finished</span><br />
      }
      case _ => {
        <i class="fa fa-refresh"></i><span> In Progress</span>
      }
    }
  </td>
  <td>
    @annotationLinks(annotation.actions(Some(user)))
  </td>
</tr>