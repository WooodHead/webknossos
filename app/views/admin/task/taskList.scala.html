@()(implicit session: oxalis.view.AuthedSessionData)

@import models.annotation.AnnotationType

@main(){
  <div id="loader"><div id="loader-icon"><i class="icon-spinner icon-spin icon-4x"></i><br>Loading</div></div>
  <div class="container wide">
    <h3>Tasks</h3>
  
    <div class="page-selection"
      data-url="@controllers.admin.routes.TaskAdministration.list()"
      data-paged-table-id="tasklist-table">
      <input type="text" class="search-query pagination-searchbox" placeholder="Search">
      <a href="@controllers.admin.routes.TaskAdministration.create()" class="pagination-createNew">Create new Task</a>
    </div>
    <table id="tasklist-table" class="table table-double-striped table-details">
      <thead>
        <tr>
          <th class="details-toggle-all"> <i class="caret-right"></i> <i class="caret-down"></i> </th>
          <th> # </th>
          <th> H-Id</th>
          <th> Project</th>
          <th> Type</th>
          <th> DataSet </th>
          <th> Edit position </th>
          <th> Experience </th>
          <th> Priority </th>
          <th> Created </th>
          <th> States </th>
        </tr>
      </thead>
      <tbody class="hide">
        <tr id="#{id}">
          <td class="details-toggle" href="controllers.admin.routes.AnnotationAdministration.annotationsForTask" data-ajax="add-row=##{id} + tr"> <i class="caret-right"></i> <i class="caret-down"></i> </td>
          <td> #{formattedHash} </td>
          <td> #{seedIdHeidelberg} </td>
          <td> 
              <a href="@controllers.admin.routes.ProjectAdministration.list##{projectName}">
                #{projectName}
              </a>
          </td>
          <td> 
            <a href="@controllers.admin.routes.TaskTypeAdministration.list##{type}">
              #{type}
            </a>
          </td>
          <td> #{dataSet} </td>
          <td> (#{editPosition}) </td>
          <td> <span class="label"> #{neededExperience.domain}: #{neededExperience.value} </span> </td>
          <td> #{priority} </td>
          <td> #{created} </td>
          <td>
              <i class="icon-play-circle"></i> #{status.open}
              <br>
              <i class="icon-random"></i> #{status.inProgress}
              <br>
              <i class="icon-ok-circle"></i> #{status.completed}
          </td>
          <td class="nowrap">
            <a href="controllers.admin.routes.TaskAdministration.edit"><i class="icon-pencil"></i> edit </a><br>
            <a href="<%= controllers.AnnotationController.trace('AnnotationType.CompoundTask', element.id).url %>" title="view all finished tracings"><i class="icon-random"></i> view </a><br>
            <a href="controllers.admin.routes.NMLIO.taskDownload" title="download all finished tracings"><i class="icon-download"></i> download </a><br>
            <a href="controllers.admin.routes.TrainingsTaskAdministration.create"><i class="icon-road"></i> use for Training </a><br>
            <a href="controllers.admin.routes.TaskAdministration.delete" data-ajax="delete-row,confirm"><i class="icon-trash"></i> delete </a>
          </td>
        </tr>

        <tr class="details-row hide" >
          <td colspan="12">
            <table class="table table-condensed table-nohead">
              <tbody>
                
              </tbody>
            </table>
          </td>
        </tr>

      </tbody>
    </table>
  </div>
}