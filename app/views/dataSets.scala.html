@(datasets: List[models.binary.DataSet])(implicit session: oxalis.view.SessionData)

@import braingames.util.Reflect

@main() {

  <div id="dataset-list" class="container">
    <div id="oxalis-header">
      <img src="@controllers.routes.Assets.at("images/oxalis.svg")">
      <div><p>Oxalis</p></div>
    </div>
    @datasets.groupBy(_.dataSource.owningTeam).map{ case (team, ds) =>

      @ds.map{ dataSet =>
        <div class="dataset img-polaroid">
          <header class="clearfix">
            <h4>@dataSet.dataSource.name</h4>
            <div class="dataset-buttons">
              <!--<a href="/levels/512c70a6e4b004e525ec5635?missionId=51f90698e4b02ee135a87368" class="edit-button">
                <i class="icon-pencil"></i>
              </a>-->
            </div>
          </header>
          <div class="dataset-display clearfix" style="height: 220px;">
            @dataSet.dataSource.dataLayer("color").map{ colorLayer =>
              <img src="@controllers.routes.BinaryData.requestImage(dataSet.dataSource.name, "color", 200, 200, 200, 200, 0, math.log(colorLayer.resolutions.max).toInt)" />
            }
            <a href="@controllers.routes.DataSetController.view(dataSet.dataSource.name)">
              <i class="icon-play"></i>
            </a>
          </div>
            <!--FIXME-->
          <div class="dataset-description clearfix">
            <h3>@team</h3>
            <h4>Original data and segmentation</h4>
            <p>@dataSet.description</p>
          </div>
        </div>
      }
    }
  </div>
  @credits()
}

